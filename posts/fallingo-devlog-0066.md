---
title: "fallingo 개발일지 - 7e5c3af..e4a6f04 (10개 커밋)"
date: "2026-02-03"
category: "dev-log"
description: "AI 인식 개선, 배포 안정화 및 낙관적 UI 적용."
tags: ["fallingo", "개발일지", "Flutter", "CI/CD", "OptimisticUpdate"]
author: "Su"
lang: "ko"
---

안녕하세요, Fallingo 개발자 Su입니다! 👋

이번 주(사실상 하루 동안 집중된) 개발 일지는 온통 `fix:` 커밋들로 가득합니다. 기능 구현이 마무리 단계에 접어들고 있다 보니, 사용자 경험을 해치거나 심각한 데이터 오류를 유발하는 자잘한 버그들을 솎아내는 데 집중했어요. 특히 인프라 쪽에서 예상치 못한 에러가 터져서 멘탈이 살짝 흔들렸지만, 결국 깔끔하게 해결했습니다.

총 10개의 커밋이 올라왔는데, 주로 **사용자 경험 개선(UX)**과 **인프라 안정화**에 대한 내용이 많습니다.

---

## 📝 이번 기간 작업 내용 (10개 커밋)

이번 기간 작업은 크게 네 가지 영역으로 분류할 수 있었습니다. 버그 수정이지만, 그중 몇몇은 기능 자체의 완성도를 올리는 중요한 작업이었습니다.

### A. 사용자 경험(UX) 및 성능 개선 🚀

가장 공을 들인 부분입니다. 사용자가 체감하는 속도와 안정성을 높이기 위해 노력했습니다.

| Commit | 내용 | 배움/느낀 점 |
| :--- | :--- | :--- |
| `fix: 피드 등록을 진정한 낙관적 업데이트로 변경` | 피드 등록 시 서버 응답을 기다리지 않고 즉시 UI에 반영하도록 구조 변경. | Flutter에서 상태 관리와 서버 응답 실패 시의 롤백 처리가 까다로웠습니다. 사용자가 실패를 인지하지 못하게 처리하는 것이 낙관적 업데이트의 핵심임을 다시 배웠습니다. |
| `fix: 카메라 음식 인식 개선 + 검색에 월드이벤트 피드 추가` | AI 기반의 음식 인식 정확도를 높이고, 검색 탭에 메인 피드를 통합하여 접근성을 높였습니다. | AI 파이프라인 학습 주기를 짧게 가져가면서 실제 사용자 데이터로 테스트하니 인식률이 급격히 오르더군요. |
| `fix: 로그아웃 시 앱이 종료되지 않는 버그 수정` | 앱 라이프사이클 관리 오류 수정. | 앱 종료 처리는 항상 신경 써야 하는데, 특히 복잡한 상태 관리 라이브러리를 쓸 때는 더욱 그렇습니다. |

### B. 인프라 및 배포 안정화 (CI/CD) ⚙️

솔직히 말씀드리면, 이 에러 때문에 새벽까지 고생했습니다. Fallingo는 Google Cloud 기반으로 운영되는데, 배포 파이프라인에서 갑자기 알 수 없는 에러가 발생했어요.

*   `fix: 배포 워크플로우에서 registry set 제거 (InternalResourceIdentityError 우회)`
    *   **문제:** 특정 이미지 레지스트리 설정 과정에서 `InternalResourceIdentityError`라는 이해하기 힘든 에러가 발생했습니다. 이는 배포 환경의 인증/권한 문제로 보였고, 결국 워크플로우 상에서 불필요한 레지스트리 설정 단계를 제거하는 방식으로 우회했습니다. 인프라 설정은 언제나 예상치 못한 변수를 던져주네요. 🤯
*   `fix: 유료 마커 지도 400 에러 수정 (쿼리 파라미터 불일치)`
    *   프론트엔드(Flutter)에서 백엔드(FastAPI)로 지도 마커 데이터를 요청할 때 쿼리 파라미터의 타입 불일치로 400 에러가 발생했습니다. 사소한 타입 문제였지만, 유료 기능을 사용하는 사용자에게는 치명적인 오류였죠.

### C. 데이터 및 기능 확장 🌍

글로벌 플랫폼을 지향하는 만큼, 다국어 지원에 대한 요구사항이 꾸준히 있었습니다.

*   `fix: 언어 선택 다이얼로그를 14개 언어 지원으로 확장`
    *   기존 4개 언어 지원에서 14개로 확장했습니다. Flutter의 i18n 시스템을 다시 한번 정비했습니다. 언어 확장 작업은 단순 번역을 넘어, UI 요소의 길이 변화(독일어 vs 한국어)를 모두 고려해야 한다는 것을 재확인했습니다.
*   `fix: 월드 이벤트 피드 캐시 재구성 시 소실 버그 수정`
    *   메모리 캐시를 재구성할 때 데이터가 소실되는 레이스 컨디션 버그를 수정했습니다. 피드 데이터의 일관성을 확보하는 데 중점을 두었습니다.

### D. 코드 품질 및 유지보수 🧹

코드의 건강을 유지하는 것은 중요합니다.

*   `fix: flutter analyze 에러 및 경고 수정`
    *   대량의 경고(Warning)와 몇몇 잠재적 에러를 `flutter analyze` 툴을 이용해 수정했습니다. 특히 Dart 린트 규칙이 업데이트되면서 발생한 경고들을 깔끔하게 정리했습니다.
*   `fix: 설정 화면에서 활동 추적 토글 제거`
    *   개인 정보 보호 정책을 단순화하고 사용자에게 혼란을 줄 수 있는 '활동 추적' 관련 토글을 제거했습니다.
*   `fix: about.html 폰트 fallback을 cursive에서 sans-serif로 변경`
    *   `about.html`의 폰트 폴백을 좀 더 범용적이고 깔끔한 `sans-serif`로 변경했습니다. 작은 부분이지만, 디테일이 완성도를 만든다고 믿습니다.

---

## 💡 작업 하이라이트: '진정한' 낙관적 업데이트의 구현

이번 주 가장 의미 있었던 작업은 단연 **피드 등록 시 낙관적 업데이트(Optimistic Update)**를 적용한 것입니다.

사용자가 사진을 올리고 '등록' 버튼을 눌렀을 때, 과거에는 서버가 응답을 줄 때까지 몇 초간 로딩 스피너를 보여줘야 했습니다. 이는 사용자 경험을 크게 저해했습니다.

이제는 버튼을 누르는 순간, 서버 응답과 관계없이 해당 피드를 UI 최상단에 즉시 표시합니다.

| 이전 (비관적) | 현재 (낙관적) |
| :---: | :---: |
| 등록 -> 로딩(3초) -> 화면 업데이트 | 등록 -> 화면 즉시 업데이트 -> (백그라운드에서) 서버 통신 |

### 중요한 학습: 롤백 전략

단순히 낙관적 업데이트를 적용하는 것보다 중요한 것은 **실패에 대비하는 것**입니다.

1.  **임시 ID 부여:** 등록 직후 클라이언트에서 임시 ID를 부여하여 UI에 표시합니다.
2.  **통신 실패 감지:** 만약 네트워크 문제나 서버 오류로 통신이 실패하면, 임시 ID를 가진 피드에 오류 표시(예: 붉은색 테두리)를 하고 사용자에게 재시도를 유도합니다.
3.  **성공 시 ID 교체:** 통신이 성공하면, 서버에서 받은 실제 ID로 임시 ID를 교체합니다.

이 과정이 매끄럽게 이루어질 수 있도록 상태 관리 로직(저희는 Riverpod을 사용하고 있습니다)을 상당히 복잡하게 재설계했습니다. 이제 Fallingo는 빠른 피드 등록 경험을 제공할 수 있게 되어 기쁩니다! 😊

## 📊 개발 현황

현재 Fallingo는 베타 런칭(2025년 12월 목표)을 달성하고, 이제 **Post-Launch Stability & Feature Polish** 단계에 접어들었습니다.

| 영역 | 진행률 | 설명 |
| :--- | :--- | :--- |
| **백엔드 (FastAPI/PostgreSQL)** | 95% | 주요 엔드포인트는 완성되었고, 부하 테스트 및 보안 강화 작업이 진행 중입니다. |
| **프론트엔드 (Flutter)** | 85% | 주요 기능(지도, 피드, 검색)은 안정화되었으며, 엣지 케이스 및 복잡한 버그(오늘 해결한 낙관적 업데이트 등)를 수정하고 있습니다. |
| **인프라 (GCP/CI/CD)** | 90% | 배포 워크플로우는 거의 안정화되었으나, 간헐적인 인증 에러(오늘의 `InternalResourceIdentityError` 같은)를 완전히 제거하는 작업을 목표로 합니다. |

이번 주 버그 픽스 스프린트를 통해, Fallingo가 2026년 정식 런칭을 향해 한 걸음 더 나아갈 수 있었습니다. 다음 일지에서는 드디어 큰 규모의 리팩토링이나 새로운 기능(예: 실시간 채팅 모듈)에 대한 이야기를 나눌 수 있기를 기대하며 마무리하겠습니다!

읽어주셔서 감사합니다! 다음 개발 일지에서 만나요! 👋