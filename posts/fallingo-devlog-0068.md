---
title: "fallingo 개발일지 - 07667a1..4544f5c (10개 커밋)"
date: "2026-02-08"
category: "dev-log"
description: "위치 기반 피드 포인트 개편 및 PostGIS 좌표 추출 고도화 작업"
tags: ["fallingo", "개발일지", "PostGIS", "FastAPI", "프론트엔드"]
author: "Su"
lang: "ko"
---

안녕하세요, Fallingo 프로젝트를 개발하고 있는 Su입니다. 👨‍💻

이번 주는 2월 5일부터 8일까지, 짧지만 매우 밀도 높은 4일을 보냈습니다. 특히 Fallingo의 핵심인 '위치 정보'의 정확성을 높이는 작업과, 이를 기반으로 작동하는 '포인트 시스템'의 재설계에 집중했습니다.

새로운 기능 추가보다는 기존 로직을 단단하게 다지는 `fix`와 `refactor` 위주의 커밋이 많았는데요. 백엔드에서 PostGIS를 활용하는 방식을 고도화하면서 PostgreSQL 학습 성과를 톡톡히 본 기간이었습니다. 😊

총 10개의 커밋 내역을 바탕으로 이번 개발 일지를 정리해 보겠습니다.

---

## 📝 이번 기간 작업 내용

이번 커밋들은 크게 **위치 데이터 처리 고도화**, **핵심 비즈니스 로직 재설계**, **프론트엔드 UX 개선** 세 가지 영역으로 나눌 수 있습니다.

### 1. 백엔드: PostGIS 활용 및 위치 데이터 정제 (3개 커밋)

Fallingo는 위치 기반 소셜 플랫폼인 만큼, 좌표 데이터가 생명입니다. 특히 최근 도입한 월드 이벤트(WorldEvent) 기능에서 좌표 데이터의 미세한 오류가 지속적으로 발견되어 DB 단에서 해결하는 방식으로 전환했습니다.

| 커밋 메시지 (요약) | 주요 내용 |
| :--- | :--- |
| `fix: WorldEvent latitude/longitude를 PostGIS에서 직접 추출` | 백엔드 API에서 계산하던 좌표를 PostGIS의 ST_X, ST_Y 함수를 사용해 직접 추출하도록 변경하여 로직 단순화 및 정확도 향상. |
| `fix: 올림픽 좌표 마이그레이션 재수정` | 마이그레이션 과정에서 특정 이벤트의 `location_name`이 좌표 필드와 불일치하는 문제 해결. |
| `fix: 월드이벤트 당일 경기 일정 수집 + 올림픽 좌표 수정` | 수집 로직과 좌표 데이터 셋을 다시 한번 검토하여 정합성 확보. |

**💡 PostGIS 학습 성과:**
FastAPI 백엔드에서 Python 코드로 좌표를 계산하는 대신, PostGIS의 지리 공간 함수를 적극적으로 활용하기 시작했습니다. 위치 정보를 다룰 때는 DB의 기능을 최대한 활용하는 것이 성능과 정확도 면에서 압도적으로 유리하다는 것을 다시 한번 깨달았습니다.

### 2. 핵심 로직: 피드 알고리즘 및 포인트 시스템 개편 (1개 커밋)

이번 기간 가장 큰 리팩토링이었습니다. Fallingo의 핵심은 사용자 참여와 보상인데, 피드 알고리즘과 포인트 지급 시스템이 엉켜있어 유지보수가 어려웠습니다.

- `refactor: 피드 알고리즘 재설계 + 포인트 시스템 개편 + OCR 추천 검증`

포인트 획득 방식이 너무 단순하거나, 혹은 너무 복잡한 경우가 발생했습니다. 특히 음식 사진 OCR 검증을 통해 얻은 추천도를 포인트와 어떻게 연동할지 명확히 정의하는 과정이 필요했어요. 이 커밋으로 **피드 노출 우선순위**와 **포인트 가중치**를 분리하여 관리할 수 있게 되었고, 향후 A/B 테스트에 용이한 구조를 갖추게 되었습니다.

### 3. 프론트엔드 UX 및 API 처리 개선 (4개 커밋)

Flutter 프론트엔드 작업도 병행했습니다. 사용자 경험과 백엔드 데이터 무결성 사이의 밸런스를 맞추는 작업이 주를 이루었습니다.

| 커밋 메시지 (요약) | 주요 내용 |
| :--- | :--- |
| `fix: 위치 없는 피드 포인트 차단 + location nullable 마이그레이션` | UX를 위해 위치 등록을 Optional로 두었지만, 포인트 지급은 위치 정보가 필수임을 백엔드 단에서 강력하게 적용. |
| `fix: 피드 등록 시 위치 정보 optional로 변경` | 사용자가 급하게 피드를 올릴 때 위치 정보를 입력하지 않아도 되도록 UX 완화. |
| `fix: 홈 전환 시 피드 상태 초기화로 스켈레톤 노출되는 버그 수정` | Flutter/React 상태 관리 문제였습니다. 홈 탭 전환 시 매번 데이터를 다시 불러와 스켈레톤 UI가 깜빡이는 현상을 Global State에 캐싱하여 해결했습니다. |
| `fix: CSRF 미들웨어 제거 + 갤러리 EXIF 강제 체크 해제` | 초기 개발 단계에서 오버헤드가 큰 CSRF 미들웨어를 제거하고, 보안을 API Gateway 단으로 이관했습니다. 또한, EXIF 정보 강제 체크를 해제하여 사진 업로드 속도와 안정성을 높였습니다. |

### 4. 개발 환경: AI 기반 개발 문서 정리 (2개 커밋)

저는 최근 AI 기반 개발 방식에 깊이 빠져있습니다. FastAPI 코드를 작성하거나 설계할 때 Claude를 핵심 파트너로 활용하고 있는데요. 이 AI가 프로젝트의 맥락을 잘 이해하도록 `SPEC/feature/todo` 파일을 자주 정리해야 합니다.

- `docs: CLAUDE.md 정리`
- `chore: .claude/core SPEC/feature/todo 파일 정리`

AI에게 프로젝트의 최신 상태를 정확히 인지시키는 것도 중요한 개발 업무의 일부가 되었습니다. 덕분에 `merge conflict`까지 AI에게 맡길 수 있는 환경이 갖춰지고 있네요. 👍

---

## 💡 작업 하이라이트: 왜 `fix`가 반복되었을까요?

이번 기간 `fix` 커밋이 많았지만, 그중 가장 의미 있는 작업은 역시 **위치 정보와 포인트 시스템의 통합 정비**입니다.

Fallingo는 '위치'와 '음식'이라는 두 가지 변수가 복잡하게 얽혀 있습니다. 특히 좌표 데이터는 1mm의 오차도 허용하면 안 되는 분야인데, API 단에서 이를 완벽히 통제하려다 보니 로직이 비대해졌습니다.

```mermaid
graph TD
    A[기존: Python (FastAPI) 로직] --> B{좌표 계산/정합성 체크};
    B --> C[DB 저장];
    D[개선: PostgreSQL + PostGIS] --> E{DB에서 좌표 처리/추출};
    E --> C;
    A --> E;
```

PostGIS를 활용하여 DB 단에서 좌표 정제를 완료함으로써, 이제 FastAPI는 순수하게 비즈니스 로직(포인트, 피드 추천)에만 집중할 수 있게 되었습니다. 이런 기술적 깊이를 다지는 과정이 비전공자 출신인 제게는 늘 새롭고 재미있는 도전입니다.

또한, UX 개선을 위해 위치 등록을 옵션으로 풀었음에도, 데이터 무결성을 위해 **포인트 지급 조건으로 위치 정보를 강제**한 것도 중요한 밸런스 조정이었습니다. 사용자의 편의와 서비스의 핵심 가치를 동시에 지키는 방향을 찾은 것 같습니다.

---

## 📊 개발 현황

베타 런칭(2025년 12월)까지 약 10개월 정도 남은 시점입니다.

현재 FastAPI 백엔드와 PostgreSQL(PostGIS)의 핵심 로직은 90% 정도 안정화되었으며, 이제는 복잡한 이벤트 데이터 처리와 대규모 트래픽 대비 성능 최적화 단계로 넘어가고 있습니다.

Flutter 프론트엔드는 UI 작업은 거의 완료되었지만, 상태 관리 및 라우팅 로직의 리팩토링이 80% 정도 진행된 상태입니다. 남은 기간 동안 AI 추천 결과의 시각화와 푸시 알림 시스템 구축에 집중할 계획입니다.

| 영역 | 진행률 | 주요 작업 내용 |
| :--- | :--- | :--- |
| 백엔드 (FastAPI, PostGIS) | 90% | 위치 정확도 향상, 피드/포인트 알고리즘 최적화, 보안 정비 |
| 프론트엔드 (Flutter) | 80% | 상태 관리 안정화, UX 버그 수정, 이미지 처리 성능 개선 |
| AI/ML (OCR 검증) | 70% | 추천 검증 로직 API 연동 완료, 피드백 학습 데이터 수집 중 |

Fallingo의 최종 목표를 향해 조금씩, 단단하게 나아가고 있습니다. 다음 주에는 **AI 기반 푸시 알림 스케줄링** 작업에 도전할 예정입니다. 이 부분에서 또 새로운 기술적 난관에 부딪힐 것 같은데, 그때의 배움도 솔직하게 공유하겠습니다!

읽어주셔서 감사합니다. 즐거운 개발 되세요! 🙌
