---
title: "Fallingo 개발일지 - 2025년 9월 1주차 (09.01 ~ 09.07)"
date: "2025-09-07"
category: "dev-log"
project: "fallingo"
tags: ["법률", "광고", "보안", "포인트시스템"]
---

## 이번 주 요약

서비스 출시를 위한 법적 기반과 수익 모델을 완성했다. 법적 문서 시스템, AdMob/AdSense 광고, 종합 보안 시스템을 구축했다. 그리고 핵심 차별화 기능인 티어별 상호작용 반경 시스템을 완성했다. 15개 커밋이지만 각각이 무거운 작업들이었다.

## 주요 작업

### 법적 문서 시스템
- 이용약관, 개인정보처리방침 API
- 다국어 지원 준비 (한국어/영어)
- 버전 관리 시스템
- 법적 동의 체크 로직

### AdMob/AdSense 광고 시스템
- 모바일: AdMob 연동
- 웹: AdSense 연동
- 피드 사이 광고 삽입 로직
- 광고 수익 추적 준비

### 종합 보안 시스템
- CSRF 보호
- Rate limiting
- SQL Injection 방지
- XSS 방지
- CORS 설정 강화

### 티어별 상호작용 반경 시스템
- 티어에 따른 좋아요 반경 제한
  - Tier 1: 제한 없음
  - Tier 2: 500m
  - Tier 3: 1km
  - Tier 4+: 점진적 확대
- PostGIS를 활용한 거리 계산
- 중복 포인트 지급 방지 시스템

### 포인트 정책 수정
- 받는 행위에는 포인트 보상 유지
- 게이미피케이션 밸런스 조정
- 악용 방지 로직

## 배운 점

**서비스 출시의 조건들**

법적 문서를 작성하면서 서비스 출시가 단순히 기능 구현만으로 끝나지 않는다는 것을 알았다. 이용약관, 개인정보처리방침. 변호사 검토는 나중에라도, 기본 틀은 필요했다. API로 제공하면 업데이트가 용이하다는 것도 배웠다.

**광고와 UX 사이**

AdMob과 AdSense를 동시에 연동했다. 모바일과 웹, 플랫폼마다 다른 SDK를 사용해야 했다. 광고 빈도 조절이 중요했다. 너무 자주 나오면 사용자가 떠나고, 너무 적으면 수익이 없다. 그 균형점을 찾아야 한다.

**티어 시스템의 딜레마**

티어별 상호작용 반경을 설계하면서 고민이 많았다. 너무 제한적이면 유저가 이탈할 것 같고, 너무 관대하면 게이미피케이션의 의미가 없다. 실제 데이터를 보고 조정해야 한다는 결론을 내렸다. 일단 만들고, 관찰하고, 개선하자.

**PostGIS로 거리 재기**

`ST_DWithin` 함수로 반경 내 음식점을 찾았다. GIST 인덱스로 최적화하고, meter 단위 변환에 주의했다. 공간 데이터를 다루는 법을 조금씩 익혀가고 있다.

**중복 포인트의 함정**

같은 행동에 여러 번 포인트를 지급하면 안 된다. 데이터베이스 unique constraint와 트랜잭션 처리로 방지했다. 게이미피케이션 시스템의 악용 가능성을 염두에 두고 설계해야 한다는 것을 배웠다.
