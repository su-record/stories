---
title: "fallingo 개발일지 - 355ecf5..6bcdb49 (20개 커밋)"
date: "2025-12-01"
category: "dev-log"
description: "Fallingo 핵심 기능인 로그인, 회원가입, 국가 선택 기능 개선 및 안정화 작업 일지"
tags: ["fallingo", "개발일지", "oauth", "flutter", "fastapi"]
author: "Su"
lang: "ko"
---

안녕하세요, Su입니다! 🍂 벌써 2025년의 마지막 달이 시작되었네요. Fallingo 베타 런칭 목표가 내년 12월인데, 시간이 정말 빠르게 흘러갑니다. 이번 개발 일지는 지난 며칠간 Fallingo의 핵심 기능인 **회원가입 및 로그인 플로우를 안정화하고, 글로벌 서비스를 위한 기반을 다진 커밋들**에 대한 이야기예요.

최근 20개의 커밋(355ecf5..6bcdb49)을 돌아보며, 어떤 도전이 있었고 또 어떻게 해결했는지 솔직하게 공유해 드릴게요! 🛠️

# fallingo 개발일지 - 355ecf5..6bcdb49 (20개 커밋)

**작업 기간**: 2025-11-30 ~ 2025-12-01

## 📝 이번 기간 작업 내용

이번 기간에는 크게 세 가지 영역에서 많은 작업을 진행했습니다. Fallingo의 가장 기본적인 사용자 경험을 완성하고, 동시에 서비스의 스케일업을 위한 기반을 다지는 데 집중했어요.

### 1. 회원가입 및 OAuth 인증 플로우 강화 🔐 (총 10개 커밋)
Fallingo의 핵심은 결국 사용자들의 활발한 소셜 활동이잖아요? 그러려면 무엇보다 안전하고 편리한 회원가입/로그인 경험이 중요하다고 생각했습니다. 특히 AI 기반의 개발 방식을 접목하면서 FastAPI와 Flutter로 새롭게 쌓아 올린 인증 시스템에서 많은 시행착오를 겪었어요.

*   **약관 동의 UI 구현 및 개선**: 사용자들이 가입 시 동의해야 하는 약관이 11개나 되더라고요. 이 모든 약관을 깔끔하게 보여주고 동의를 얻는 UI를 구현하고, 마지막 '동의 버튼'이 화면 하단에 잘 고정되도록 조정했습니다. (`feat: 11개 약관 동의 UI 구현`, `fix: 회원가입 화면 동의 버튼 플로팅 제거`)
*   **Google OAuth 인증 안정화**: Google OAuth 로그인이 iOS 환경에서 제대로 작동하지 않는 문제가 있었어요. 토큰 검증 로직을 별도 스레드에서 실행하고, ID 토큰을 직접 검증하는 방식을 도입해서 보안성과 안정성을 높였습니다. 이 과정에서 CSRF 설정도 여러 번 수정하면서 꽤 많은 시간을 보냈네요. 🤯 (`feat: Google OAuth ID Token 직접 검증 추가`, `fix: Google OAuth 토큰 검증을 별도 스레드에서 실행`, `feat: iOS Google 로그인 구현 및 CSRF 설정 수정`, `Merge pull request #7 from su-record/claude/fix-google-signup-011Fqw9P447g5YR3eHFTuWE6`)
*   **인증 로직 디버그 강화 및 트랜잭션 일관성 확보**: 예상치 못한 에러 상황을 추적하기 위해 OAuth 인증 플로우 전반에 상세한 디버그 로깅을 추가했어요. 또한, 회원가입 과정에서 발생하는 DB 트랜잭션의 일관성을 확보하여, 혹시라도 데이터가 꼬이는 일이 없도록 수정했습니다. (`feat: 토큰 검증 디버그 로깅 강화`, `feat: OAuth 인증 플로우에 상세 디버그 로깅 추가`, `fix: 회원가입 트랜잭션 일관성 문제 수정`)

### 2. 글로벌 서비스 기반 마련 (국가 설정 및 다국어 처리) 🌍 (총 2개 커밋)
Fallingo는 전 세계 미식가들을 위한 플랫폼이 될 거예요! 베타 런칭 때부터 글로벌 서비스를 염두에 두고 국가 선택 기능을 고도화했습니다.

*   **전 세계 250개 국가 지원**: 사용자들은 이제 Fallingo에서 전 세계 250개 국가 중 활동 국가를 선택할 수 있습니다. 단순히 국가 목록만 제공하는 것이 아니라, 다국어 처리까지 함께 적용해서 사용 편의성을 높였어요.
*   **'거주 국가' → '활동 국가'로 용어 변경**: 사용자가 실제로 거주하는 곳보다는 Fallingo에서 주로 활동할 국가를 선택하는 것이 서비스 목적에 더 부합한다고 판단했습니다. 단순히 용어 변경이지만, 서비스의 지향점을 명확히 하는 중요한 작업이었어요.

### 3. 백엔드(FastAPI) 및 프론트엔드(Flutter) 안정화 🚀 (총 8개 커밋)
새로운 스택인 FastAPI와 Flutter를 활용하면서 발생하는 다양한 기술적 문제들을 해결하고, 코드의 안정성을 높이는 데 집중했습니다. 역시 배우면서 하는 개발은 '삽질'의 연속이지만, 그만큼 얻는 것도 많네요!

*   **FastAPI Async 쿼리 마이그레이션 및 안정화**: 기존 백엔드 쿼리 로직을 비동기(Async) 방식으로 마이그레이션 하는 과정에서 여러 문법 오류와 세션 타입 관련 이슈가 발생했어요. PostgreSQL과 연동되는 부분에서 특히 세심한 조정이 필요했습니다. (`feat: 로그인 화면 개선 및 백엔드 async 쿼리 마이그레이션`, `fix: AsyncSession 쿼리 문법 수정 및 iOS 설정 추가`, `fix: search_autocomplete_service Session 타입 수정`)
*   **Flutter iOS 환경 개선 및 버그 수정**: iOS 기기에서 Google 로그인 시 발생하는 문제 외에도, LaunchScreen 로고를 Flutter 스플래시와 통일하여 사용자 경험을 일관되게 만들었습니다. 또한, `Provider not found` 에러나 `DeviceInfoService`의 중복 호출 방지 같은 사소하지만 중요한 버그들을 해결했어요. (`fix: iOS LaunchScreen 로고를 Flutter 스플래시와 동일하게 변경`, `fix: Provider not found 에러 수정`, `fix: DeviceInfoService 중복 호출 방지 (캐싱)`)
*   **코드 리팩토링 및 오타 수정**: 사용하지 않는 `SearchAutocompleteService`를 삭제하고, Firebase 웹 API 키 오타를 수정하는 등 코드베이스를 정리하고 작은 오류들을 잡았습니다. 이런 작은 작업들이 쌓여서 프로젝트의 건강함을 유지한다고 믿어요. 💪 (`refactor: 미사용 SearchAutocompleteService 삭제`, `fix: Firebase 웹 API 키 수정 (오타 수정)`)

## 💡 작업 하이라이트

이번 기간의 가장 큰 하이라이트는 역시 **Google OAuth 로그인 및 회원가입 플로우를 iOS 환경까지 완벽하게 통합하고 안정화한 것**이라고 생각합니다. React와 Next.js로 주로 작업했던 저에게 Flutter와 FastAPI의 조합은 새로운 도전이었거든요. 특히 Google ID 토큰을 직접 검증하고, 여러 스레드에서 비동기적으로 처리하는 과정에서 깊이 있는 이해가 필요했습니다. 🕵️‍♂️

```mermaid
graph TD
    A[Flutter App (iOS)] -- Google 로그인 요청 --> B(Google SDK)
    B -- ID Token 발급 --> A
    A -- ID Token + 사용자 정보 --> C[FastAPI Backend]
    C -- 백그라운드 스레드 --> D[Google API (토큰 검증)]
    D -- 검증 결과 --> C
    C -- 검증 성공 시 --> E[PostgreSQL (회원 정보 저장/업데이트)]
    C -- JWT 발급 --> A
```
(Google OAuth 인증 플로우 - 간략화)

처음에는 토큰 검증 실패, 세션 문제, CSRF 오류 등 수많은 에러 메시지와 씨름했어요. 하지만 각 에러의 원인을 끈질기게 파고들어 해결하면서, OAuth 2.0과 OIDC(OpenID Connect) 표준에 대한 이해를 훨씬 깊게 할 수 있었습니다. 역시 공식 문서와 디버그 로깅이 최고더라고요! 📚

또한, 백엔드의 **AsyncSession 쿼리 마이그레이션**도 중요한 변화였습니다. FastAPI는 비동기 프레임워크인 만큼, DB 쿼리도 비동기적으로 처리해야 성능을 최대로 끌어올릴 수 있거든요. 이 과정에서 기존의 동기식 쿼리 문법을 비동기식으로 전환하는 작업이 쉽지 않았지만, Fallingo의 미래 확장성을 생각하면 꼭 필요한 투자였습니다. 몇 번의 `fix` 커밋이 보였던 건, 이 마이그레이션 과정에서 발생한 자잘한 사이드 이펙트들을 잡기 위한 노력의 흔적이라고 보시면 될 것 같아요. 😅

## 📊 개발 현황

현재 Fallingo는 핵심 사용자 기능인 **회원가입, 로그인, 그리고 개인 프로필 설정(국가 포함) 부분이 거의 완성 단계**에 접어들었습니다. 특히 복잡한 OAuth 인증 플로우와 글로벌 서비스를 위한 다국어/국가 선택 기능이 안정화되면서, 이제 다음 단계인 '위치 기반 맛집 탐색' 및 '피드 공유' 기능 개발에 더욱 박차를 가할 수 있게 되었어요.

대략적으로 말씀드리자면, 현재 **백엔드 핵심 기능은 85% 정도 완료**되었고, **프론트엔드(Flutter) 주요 UI 및 로직은 70% 정도 진행**되었다고 판단하고 있습니다. 이제부터는 본격적으로 다양한 음식 관련 데이터와 위치 정보를 연동하고, 사용자 피드 기능을 구현하는 데 집중할 계획입니다. 베타 런칭 목표인 내년 12월까지, Fallingo가 많은 분들에게 사랑받는 플랫폼이 될 수 있도록 계속해서 달려나가겠습니다! 🔥

다음 개발 일지도 기대해주세요! 궁금한 점이나 피드백은 언제든 환영입니다. 😊