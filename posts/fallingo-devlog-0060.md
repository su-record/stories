---
title: "fallingo 개발일지 - 7f296f1..1c1cba2 (18개 커밋)"
date: "2026-01-31"
category: "dev-log"
description: "한국어 RAG 온톨로지 도입 및 피드 Riverpod 전환 작업"
tags: ["fallingo", "개발일지", "Flutter", "FastAPI", "RAG", "Riverpod", "AI"]
author: "Su"
lang: "ko"
---

안녕하세요, Fallingo 프로젝트를 개발하는 Su입니다! 🙋‍♂️

2026년 1월의 마지막 이틀은 정말 밀도 높은 작업 기간이었습니다. Fallingo의 핵심인 AI 검색 파이프라인과 프론트엔드 상태 관리 아키텍처를 완전히 뒤집는 큰 작업들이 몰려 있었거든요. 이틀 동안 총 18개의 커밋을 기록하며 프로젝트의 안정성과 미래 확장성을 동시에 챙기려고 노력했습니다.

특히 비전공자로 시작해 최근 AI 기반 개발 방식으로 전환하며 FastAPI와 Flutter를 집중적으로 다루고 있는데, 이번 기간은 이 두 스택에서 가장 깊이 있는 도전을 했던 것 같습니다.

## 📝 이번 기간 작업 내용 (2026-01-30 ~ 01-31)

이번 작업은 크게 **AI/백엔드 코어 강화**, **프론트엔드 리팩토링 및 안정화**, 그리고 **버그 헌팅** 세 가지 영역으로 나눌 수 있습니다.

### 1. 🔍 AI/검색 및 백엔드 코어 강화 (5건)

Fallingo는 사용자가 올린 음식 사진과 위치 데이터를 바탕으로 정보를 제공해야 하는데, 여기서 가장 어려운 부분이 바로 "한국어" 데이터 처리입니다. 특히 초성, 자음 분리, 띄어쓰기 등 다양한 변수를 커버해야 했죠.

| 영역 | 커밋 내용 요약 | 배운 점/결과 |
| :--- | :--- | :--- |
| **AI/검색 파이프라인** | `feat(normalization): 한국어 정규화 + RAG 온톨로지 + 하이브리드 검색 파이프라인` | 한국어 검색 정확도를 획기적으로 개선하기 위한 핵심 인프라를 구축했습니다. RAG(Retrieval-Augmented Generation) 도입으로 온톨로지 기반 지식 검색을 병행할 수 있게 되었습니다. |
| **월드 이벤트 API** | `fix(world-event): 웹 스크래핑 실패 시 GPT fallback + httpx 헤더 개선` | 외부 데이터 수집 안정성 확보. 스크래핑이 막힐 경우 GPT 모델에게 데이터를 재구성하도록 요청하여 데이터 누락을 최소화했습니다. |
| **게이미피케이션** | `refactor(gamification): 게이미피케이션 모듈 4단계 리팩토링 + datetime.utcnow() 제거` | FastAPI 기반 백엔드에서 `datetime.utcnow()` 대신 표준 시간대 인식 (`timezone-aware`) 객체를 사용하도록 변경했습니다. 동시성 문제가 생길 수 있고, 국제 서비스에서는 시간 처리가 매우 중요하기 때문에 꼭 필요한 작업이었습니다. |
| **데이터 검증** | `fix(world-event): host_country_code varchar(2) 초과 방지` | 데이터베이스에 잘못된 데이터가 들어가는 것을 사전에 방지하는 유효성 검증 로직을 추가했습니다. |
| **마커 API** | `feat(paid-markers): GET /my 엔드포인트 구현 + 에러 메시지 개선` | 사용자별 유료 마커 정보를 조회하는 새로운 엔드포인트를 구현하고, 에러 메시지를 사용자 친화적으로 개선했습니다. |

### 2. 📱 프론트엔드 아키텍처 및 리팩토링 (6건)

Flutter를 이용해 개발 중인 프론트엔드에서는 상태 관리가 늘 큰 숙제입니다. 특히 피드처럼 복잡한 데이터 흐름을 가진 모듈에서는 기존 Provider 패턴의 복잡성이 커져서 과감하게 **Riverpod**으로 전환하는 대규모 리팩토링을 진행했습니다.

| 영역 | 커밋 내용 요약 | 배운 점/결과 |
| :--- | :--- | :--- |
| **피드 아키텍처** | `feat(feed): 피드 아키텍처 리팩토링 - Riverpod 전환 + 백엔드 모듈 분할 + 테스트` | 가장 큰 작업이었습니다. 피드 모듈의 상태를 Riverpod으로 관리하며, 테스트 커버리지를 높였습니다. 상태 흐름이 명확해져 유지보수가 훨씬 수월해질 것을 기대합니다. 🎉 |
| **인증/설정** | `fix(auth): 인증/회원가입 코드 리뷰 이슈 수정 + 스플래시 리뷰 수정` / `fix(frontend): UI 리뷰 수정 + 설정 영속성 구현` | 인증 플로우의 사용자 경험을 개선하고, 사용자 설정(테마, 언어 등)이 앱을 껐다 켜도 유지되도록 영속성(Persistence)을 구현했습니다. |
| **피드 기능 추가** | `feat(feed): 피드 작성 시 날씨 데이터 수집 + 스플래시 날씨 UI 제거` | 사용자가 어떤 날씨에 그 음식을 먹었는지 기록하기 위해 데이터를 수집하기 시작했습니다. 스플래시 화면의 불필요한 날씨 UI는 제거하여 로딩 속도를 개선했습니다. |
| **지역화/UX** | `feat(l10n): certifiedRestaurantYear 다국어 키 추가 + zh 상속 구조 수정` / `feat(l10n): 빈 상태 메시지를 활동 독려 문구로 변경` | 다국어(i18n) 처리를 보강하고, 사용자가 앱에 처음 왔을 때 빈 화면 대신 활동을 유도하는 문구를 표시하도록 변경했습니다. |

### 3. 🐞 핵심 버그 및 플랫폼 호환성 수정 (7건)

복잡한 AI 및 비전 로직, 지도 처리 로직에서 예상치 못한 P1, P2 급 버그들이 발생하여 집중적으로 수정했습니다.

| 영역 | 커밋 내용 요약 | 배운 점/결과 |
| :--- | :--- | :--- |
| **비전/카메라** | `fix(vision): 실시간 카메라 음식 인식 실패 수정 - data: URL 미처리 버그` | 이 버그 때문에 안드로이드에서 음식 인식 기능이 제대로 동작하지 않았습니다. 카메라에서 전달된 데이터가 `data: URL` 형식으로 올 경우, 이를 올바르게 디코딩하지 못해서 발생했습니다. 디버깅에 시간이 좀 걸렸지만, 핵심 기능이라 우선순위 높게 처리했습니다. 🥲 |
| **지도 기능** | `fix(map): 임베디드 GoogleMap 타일 미렌더링 + 위치 재수정 기능` | 지도가 표시되지 않는 치명적인 버그를 수정하고, 사용자가 지도에서 핀을 옮겨 위치를 재수정할 수 있는 기능을 추가했습니다. |
| **피드 안정성** | `fix(feed): P1 버그 수정 + P2 아키텍처 리팩토링` / `fix(feed): 피드 OCR 인증 로직 보강 + 코드 리뷰 수정` | 피드 관련 P1(Critical) 버그를 긴급 수정하고, OCR을 이용한 영수증 인증 로직을 좀 더 강력하게 보강했습니다. |
| **플랫폼 호환성** | `fix(web): 웹 플랫폼에서 피드 등록(카메라) 버튼 숨김 처리` | Flutter Web 빌드시 모바일의 카메라 기능을 그대로 노출하면 사용자가 혼란을 겪기 때문에, 플랫폼별로 기능 접근성을 제어했습니다. |
| **월드 이벤트 안정성** | `fix(world-event): P2 이슈 3건 수정 - 보안/동시성/모듈화` | 이벤트 처리 과정에서 발생할 수 있는 보안 및 동시성 관련 이슈를 수정하여 모듈의 독립성을 높였습니다. |

---

## 💡 작업 하이라이트: AI 코어와 FE 코어의 동시 발전

이번 기간의 가장 의미 있는 작업은 두 가지 코어 시스템을 동시에 안정화시킨 것입니다.

### 1. 한국어 RAG 온톨로지 파이프라인 구축 🇰🇷

Fallingo가 국내 서비스를 목표로 하는 만큼, 한국 음식과 위치 데이터의 비정형성(Non-uniformity)을 처리하는 것이 가장 중요했습니다. 단순 키워드 검색을 넘어 **온톨로지(Ontology)** 기반의 지식 그래프와 연계된 RAG 시스템을 구축하여, 사용자가 '김치찌개 맛집'을 검색했을 때 단순히 태그 매칭이 아닌 지리적 특성, 레시피 유형 등 다양한 맥락을 반영한 결과를 얻을 수 있도록 기반을 다졌습니다.

### 2. 피드 모듈 Riverpod 전환 (Flutter)

초기에는 상태 관리의 진입 장벽이 낮은 Provider를 사용했으나, 피드처럼 복잡한 '실시간 좋아요/댓글', '페이지네이션', '로컬 캐싱' 등이 얽히면서 상태 추적이 어려워졌습니다.

| Before (Provider) | After (Riverpod) |
| :--- | :--- |
| Widget Tree 깊숙한 곳에서 `context.watch<T>()` 사용 | Global하게 접근 가능한 `ProviderRef` 사용 |
| 상태 변경 시 불필요한 위젯 리빌드 발생 | 상태 의존성을 명시하여 필요한 곳만 리빌드 |
| 테스트 코드 작성 어려움 | 테스트에서 Provider를 쉽게 오버라이드 가능 |

이번 전환으로 Flutter 개발의 생산성과 테스트 가능성이 크게 향상될 것으로 기대하고 있습니다. 리팩토링 작업은 언제나 고통스럽지만, 미래를 위한 투자라고 생각합니다! 💪

## 📊 개발 현황

Fallingo 프로젝트는 현재 백엔드의 주요 API 설계와 AI 코어 로직의 초안이 완성되는 단계에 진입했습니다.

| 영역 | 진행 현황 (2026-01-31) | 주요 마일스톤 |
| :--- | :--- | :--- |
| **백엔드 (FastAPI/PostgreSQL)** | 약 85% | RAG 파이프라인 안정화 및 결제 모듈 연동 |
| **프론트엔드 (Flutter)** | 약 75% | 핵심 기능(지도, 피드, 인증) Riverpod 전환 완료 |
| **AI/ML** | 약 60% | 한국어 정규화 완료, 모델 파인튜닝 진행 중 |

다음 목표는 RAG 파이프라인에 실제 데이터를 주입하며 성능 튜닝에 집중하는 것입니다. 그리고 저는 구글 클라우드 크레딧($2,000)을 받았기 때문에, 이제 본격적으로 GCP 환경에서 AI 모델 배포 및 테스트를 진행하며 비용 최적화도 함께 고민해 봐야 합니다. 🚀

다음 개발일지에서 또 재미있는 기술적 도전기로 찾아뵙겠습니다. 감사합니다!