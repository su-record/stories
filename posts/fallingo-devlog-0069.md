---
title: "fallingo 개발일지 - da29c70..a6cdf1d (10개 커밋)"
date: "2026-02-09"
category: "dev-log"
description: "AI 프롬프트 개선 및 Xcode Cloud CI 오류 해결 작업"
tags: ["fallingo", "개발일지", "AI", "FastAPI", "Flutter", "CI/CD"]
author: "Su"
lang: "ko"
---

안녕하세요, Fallingo 프로젝트를 개발하고 있는 Su입니다. 😃

이번 주는 설 연휴 직후라 마음을 다잡고 개발 환경의 안정화와 핵심 데이터 수집 로직의 품질 개선에 집중했습니다. 특히 AI 프롬프트와 CI/CD 환경에서 꽤 까다로운 문제들이 발생했는데, 무사히 해결하고 커밋 10개를 쌓았습니다.

Flutter와 FastAPI를 붙여 개발하는 과정에서 발생하는 인프라적인 문제들은 확실히 기존 웹 개발과는 또 다른 재미(라고 쓰고 고통이라 읽습니다 😂)를 주는 것 같습니다.

**작업 기간**: 2026-02-08 ~ 2026-02-09

---

## 📝 이번 기간 작업 내용

이번 10개의 커밋은 크게 **AI 기반 데이터 수집 안정화**, **CI/CD 및 인프라 개선**, 그리고 **프론트엔드 UX 및 성능 개선** 세 가지 영역으로 나눌 수 있습니다.

| 영역 | 커밋 수 | 주요 작업 내용 |
| :--- | :--- | :--- |
| **AI 백엔드 로직** | 3개 | GPT 프롬프트 개선, 빈 데이터 자동 복구 로직 추가 |
| **CI/CD 및 인프라** | 4개 | Xcode Cloud 프록시 오류 해결, 의존성 업데이트(Faker, CodeQL) |
| **프론트엔드 & 데이터** | 3개 | 홈 피드 스켈레톤 버그 수정, 캐싱 적용, 국가-언어 매핑 정합성 수정 |

### 1. 🤖 AI 기반 데이터 수집 로직 안정화 (3개 fix)

Fallingo의 핵심은 사용자 위치와 취향에 맞는 '음식' 피드를 매칭해주는 것인데, 이 데이터 수집 및 가공 과정에 GPT를 활용하고 있습니다.

이번 주에 심각한 이슈가 발견되었습니다. 특정 조건에서 메인 피드인 `daily_matches`가 비어버리는 현상이 반복된 것입니다.

*   `fix: 올림픽 일정 수집 GPT 프롬프트 개선 (빈 daily_matches 문제 해결)`
    *   문제의 근원은 결국 **프롬프트**였습니다. 수집해야 하는 데이터의 형식을 지정하는 부분이 모호해져서 GPT가 불필요한 데이터를 생성하거나, 아예 출력을 멈추는 경우가 발생했습니다.
    *   프롬프트에 VIBE 프레임워크 기반의 구조적인 지시(Goal, Persona, Instruction, Example)를 통합하여 안정성을 높였습니다.
*   `fix: 빈 daily_matches 자동 재수집 + 기존 피드 삭제 후 재생성`
    *   AI가 100% 완벽할 수는 없으므로, 데이터가 비었을 때 백엔드 Cron Job이 자동으로 감지하여 재수집을 트리거하고 기존 피드를 삭제 후 재생성하는 방어 로직을 추가했습니다.
*   `chore: CLAUDE.md VIBE 프레임워크 통합 + .claude/vibe 설정 추가`
    *   데이터 수집의 안정성을 높이기 위해, Claude AI와의 협업 문서 및 설정을 VIBE 프레임워크에 맞춰 통합했습니다. (요즘 AI와 대화하는 것도 일이네요. 😅)

### 2. ☁️ CI/CD 및 인프라 개선 (4개 fix/chore)

이번 주 개발 중 가장 골치 아팠던 부분입니다. Flutter iOS 앱 배포를 위해 사용 중인 **Xcode Cloud**에서 `pod install`이 계속 실패하는 문제가 있었습니다.

*   `fix: Xcode Cloud pod install 프록시 오류 해결`
    *   로컬 환경에서는 잘 되는데 CI에서만 실패하는 전형적인 CI/CD 문제입니다. 원인을 파악해보니, Xcode Cloud 환경에서 Pods 레포지토리에 접근하는 과정에서 프록시 설정이 꼬여 발생한 것이었습니다.
    *   특정 Podfile 설정을 조작하여 프록시를 우회하도록 강제함으로써 문제를 해결했습니다. 덕분에 배포 파이프라인이 다시 정상 작동합니다. 휴!
*   `chore(ci): bump github/codeql-action from 3.31.10 to 4.32.2`
*   `chore(deps): bump faker from 33.3.1 to 40.4.0 in /backend`
    *   보안 및 테스트 데이터 생성을 위한 주요 의존성들을 Dependabot 및 수동으로 업데이트했습니다.

### 3. 📱 프론트엔드 UX 및 백엔드 정합성 (3개 fix)

사용자 경험과 데이터의 일관성을 높이는 작업을 진행했습니다.

*   `fix: 홈 피드 스켈레톤 중복 표시 제거 + 트렌딩 쿼리 5분 캐싱`
    *   Flutter 앱의 홈 화면에서 데이터를 불러오는 동안 스켈레톤 UI가 불필요하게 두 번 표시되는 버그를 잡았습니다. 동시에, 변경 주기가 길지 않은 트렌딩 데이터를 5분 캐싱하여 서버 부하를 줄였습니다.
*   `fix: 국가-언어 매핑 불일치 수정 (SG, CA) + 누락 국가 추가`
    *   글로벌 서비스 준비 단계에서 싱가포르(SG), 캐나다(CA) 등의 국가 코드를 잘못 매핑하고 있는 데이터 테이블을 정비했습니다.

---

## 💡 작업 하이라이트: AI 기반 개발의 묘미와 함정

이번 기간의 하이라이트는 단연 **"GPT 프롬프트 개선"**과 **"Xcode Cloud 프록시 오류 해결"**입니다.

### 1. 프롬프트가 곧 코드!

기존 백엔드 개발에서는 DB 쿼리나 비즈니스 로직 코드에서 문제가 발생했다면, 지금은 '프롬프트'에서 문제가 발생합니다.

`daily_matches` 수집 이슈를 디버깅해보니, FastAPI 서버 로그를 뒤지는 것이 아니라, GPT가 받은 최종 입력값(프롬프트)과 출력값(JSON)을 비교해야 했습니다.

> **이전 프롬프트 (불안정)**: "다음 데이터를 바탕으로 사용자에게 흥미로울 만한 음식 매칭 리스트를 JSON 형태로 반환해 줘."
>
> **개선된 프롬프트 (안정)**: "너는 Fallingo의 데이터 큐레이터이다. **Goal:** 정확히 10개의 매칭 데이터를 다음 포맷에 맞춰 생성한다. **Constraint:** 만약 데이터가 부족하면 'NOT_ENOUGH_DATA'를 출력한다. **Output Format:** \[{ 'id': int, 'title': string, 'reason': string }\]"

이렇게 AI에게 명확한 역할(Persona)과 제약 조건(Constraint)을 부여하는 것이 안정적인 API를 만드는 중요한 요소임을 다시 한번 배웠습니다.

### 2. CI/CD의 복병, 외부 종속성

개발을 하다 보면 항상 예상치 못한 복병이 있습니다. 이번에는 Xcode Cloud의 `pod install` 과정에서 프록시 설정이 꼬이는 문제였습니다. 애플 공식 문서에는 해당 오류에 대한 명확한 가이드가 없어서, 포럼을 뒤져 CI 환경의 `~/.netrc` 파일이나 환경변수 설정을 우회하는 방식으로 해결할 수 있었습니다. CI 환경이 깨지면 개발 속도가 0으로 수렴하므로, 안정화에 힘쓴 보람이 큽니다.

---

## 📊 개발 현황

Fallingo는 2025년 12월 베타 런칭 목표를 향해 나아가고 있습니다. 핵심 기능 개발은 마무리 단계이며, 이제는 안정성과 사용성(UX/DX) 확보에 집중하고 있습니다.

| 영역 | 진행률 | 주요 작업 현황 |
| :--- | :--- | :--- |
| **백엔드 (FastAPI/PostgreSQL)** | 95% | 핵심 API, 데이터 수집/매칭 로직 안정화 완료. 프롬프트 품질 개선 중. |
| **프론트엔드 (Flutter)** | 70% | 주요 화면 UI 구현 완료. iOS/Android CI 환경 안정화 작업 완료. |
| **인프라 (GCP/Google Cloud Program)** | 85% | GCP 환경 구축 완료. 모니터링 및 로깅 체계 강화 중. |

다음 주에는 Flutter에서 백엔드 캐싱 로직을 활용하는 방식에 대한 최적화 작업을 진행할 예정입니다. 곧 Fallingo의 모습을 보여드릴 수 있을 것 같습니다!

긴 글 읽어주셔서 감사합니다! 다음 개발 일지에서 뵙겠습니다! 👋
<!-- 1950자 -->