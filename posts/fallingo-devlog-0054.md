---
title: "fallingo 개발일지 - e27f063..63d1917 (10개 커밋)"
date: "2026-01-27"
category: "dev-log"
description: "CI/CD 환경 설정과 백엔드 안정화 및 Flutter 기능 추가를 진행했습니다."
tags: ["fallingo", "개발일지", "Flutter", "FastAPI", "CI/CD"]
author: "Su"
lang: "ko"
---

안녕하세요, Fallingo 프로젝트를 개발하는 Su입니다. 👨‍💻

1월 말, 이틀 동안 굉장히 밀도 높은 작업을 진행했습니다. 백엔드 안정화부터 프론트엔드 기능 추가, 그리고 가장 골치 아팠던 인프라와 CI/CD 설정을 병행하느라 정신이 없었는데요.

특히 이번 기간에는 단순히 기능을 만드는 것을 넘어, 서비스를 실제 클라우드 환경에서 안정적으로 운영하기 위한 ‘기반 다지기’ 작업에 커밋의 절반 이상을 쏟아부었습니다. 10개 커밋 중 절반 이상이 `fix`나 `ci`, `chore`였던 것이 그 증거겠죠! 😅

이번 기간 동안 진행했던 10개의 커밋 내역을 영역별로 정리해 보겠습니다.

---

## 📝 이번 기간 작업 내용 (2026-01-26 ~ 2026-01-27)

총 10개의 커밋을 기능/영역별로 나누어 4가지 주요 분야에서 작업했습니다.

| 분야 | 작업량 | 주요 내용 |
| :--- | :--- | :--- |
| **CI/CD 및 인프라** | 4건 (fix, ci) | Xcode Cloud 빌드 안정화 및 CSP 보안 헤더 문제 해결 |
| **백엔드 안정화 (FastAPI)** | 2건 (fix) | 데이터베이스 연결 지연 초기화 및 헬스 체크 로직 수정 |
| **프론트엔드 (Flutter)** | 2건 (feat, refactor) | 유료 기능 화면 개발 및 스플래시 UI 개선 |
| **유지보수 및 문서화** | 2건 (chore, docs) | 코드 포맷팅, 의존성 업데이트, AI 전략 문서 갱신 |

### 1. 🌐 CI/CD 및 인프라 설정 집중 (총 4개 커밋)

이번 기간 작업의 가장 큰 비중을 차지했습니다. Fallingo는 모바일(iOS/Android)과 웹을 모두 지원하는 하이브리드 앱으로 개발 중이다 보니, 빌드 환경과 보안 설정에서 자잘한 문제가 많았습니다.

*   `ci: Xcode Cloud Flutter 빌드 스크립트 추가`
*   `fix: Xcode Cloud 스크립트에서 중복 pod install 제거`

Flutter iOS 빌드를 위해 Xcode Cloud 환경을 도입하는 과정이 만만치 않았습니다. 특히 `pod install`이 빌드 스크립트에서 중복 실행되면서 발생하는 오버헤드와 실패를 잡는 데 시간을 많이 썼습니다. 결국 스크립트를 깔끔하게 정리하여 빌드 시간을 단축했습니다.

*   `fix: CSP에 Google 로그인 도메인 추가`
*   `fix: CSP 헤더에 Firebase, CanvasKit, 폰트 도메인 추가`

Content Security Policy (CSP) 문제는 언제나 개발자를 괴롭힙니다. Google 로그인을 적용했는데 인증 팝업이 막히거나, Flutter Web 빌드 시 필요한 CanvasKit 스크립트 로딩이 막히는 등 여러 도메인을 허용 리스트에 추가해야 했습니다. 보안과 편의성 사이의 줄타기였지만, 일단 서비스에 필요한 도메인들을 추가하여 핵심 기능을 정상화했습니다.

### 2. 🐘 백엔드 안정화 및 데이터베이스 연결 (총 2개 커밋)

FastAPI 기반의 백엔드 서비스는 Azure Container Apps 환경에서 운영될 예정입니다. 이 환경에서 발생하는 초기 연결 문제를 해결했습니다.

*   `fix(database): Lazy Initialization 패턴으로 Azure Container Apps 호환성 수정`

가장 의미 있는 수정 중 하나였습니다. FastAPI 서버가 구동될 때 데이터베이스 커넥션 풀을 미리 초기화하는 방식이 Azure Container Apps 환경의 특정 조건(특히 콜드 스타트나 스케일 아웃 시)에서 문제를 일으켰습니다. 이를 해결하기 위해 DB 세션을 요청이 들어올 때마다 지연 초기화(Lazy Initialization)하는 패턴으로 변경했습니다. 이는 클라우드 환경의 유연성에 필수적인 조치였습니다.

*   `fix(health): use get_engine() instead of engine variable`

헬스 체크 엔드포인트가 제대로 DB 엔진 상태를 확인하지 못하고 서버 변수에만 의존하는 버그를 수정하여, 실제 DB 연결 상태를 정확히 반영하도록 개선했습니다.

### 3. ✨ 프론트엔드 기능 개발 (Flutter) (총 2개 커밋)

결제 및 유료 마커 기능 관련 UI 개발을 진행했습니다.

*   `feat: 유료 마커 구매 화면 다국어 지원 및 시작일 선택 기능 추가`

유료 마커(프리미엄 기능)를 구매하는 화면의 핵심 로직을 추가했습니다. 특히 사용자 경험을 위해 다국어 지원을 미리 적용했고, 마커 사용 시작일을 지정할 수 있는 기능을 구현했습니다. 결제 UX는 정말 중요하기 때문에, 세심하게 작업했습니다.

*   `refactor: 스플래시 화면 로고 펄스 애니메이션 제거`

개발 초기에는 역동성을 주기 위해 로고에 펄스 애니메이션을 넣었었는데, 테스트 결과 불필요하게 사용자의 시선을 분산시키고, 일부 환경에서 GPU 오버헤드를 유발하는 것을 확인했습니다. 과감하게 제거하고 깔끔하고 정적인 화면으로 변경하여 집중도를 높였습니다.

### 4. 📚 문서 및 유지보수 (총 2개 커밋)

*   `docs: CLAUDE.md AI 모델 구성 현황 업데이트`

최근 Fallingo 프로젝트에 Claude 3 Opus와 Sonnet 모델을 적극적으로 활용하고 있는데요. AI 모델의 역할 분담, 프롬프트 엔지니어링 전략 등을 정리한 내부 문서를 최신화했습니다. 비전공자 출신으로서 AI를 활용한 개발 방식이 저에게는 엄청난 생산성 도구가 되어주고 있습니다. 이 경험은 나중에 별도로 블로그에 공유해 볼게요!

---

## 💡 작업 하이라이트: 클라우드 호환성 확보와 CSP의 늪

이번 기간 가장 큰 성과는 **클라우드 배포 호환성**을 높였다는 점입니다.

### 1. Azure Container Apps와 DB Lazy Initialization 🌊

데이터베이스 연결 지연 초기화 패턴을 적용한 덕분에, 서버가 요청을 받을 때까지 DB 연결을 미루게 되면서 컨테이너 앱 환경에서 발생하던 예측 불가능한 연결 오류를 해결할 수 있었습니다. 처음에는 "왜 로컬에서는 잘되던 것이 클라우드에서만 문제일까?" 하며 며칠을 고민했지만, 결국 클라우드 환경의 특성(짧은 생명주기, 오토 스케일링)을 이해하고 접근하니 답이 보이더군요.

### 2. CSP 보안 헤더와의 씨름 🔒

CI/CD와 더불어 CSP 문제는 매번 짜증나지만 꼭 필요한 작업입니다.

| 도메인 | 필요 이유 | CSP 지시어 |
| :--- | :--- | :--- |
| `accounts.google.com` | Google 소셜 로그인 인증 | `connect-src` |
| `www.gstatic.com` | Google 폰트 및 리소스 | `font-src`, `script-src` |
| `*.firebaseapp.com` | Firebase 인증 및 스토리지 | `connect-src` |
| `canvaskit.googlecode.com` | Flutter Web 렌더링 엔진 | `script-src` |

이처럼 다양한 외부 서비스 의존성이 많아질수록 CSP 관리는 복잡해지지만, 사용자 보안과 앱의 안정적인 동작을 위해 필수적으로 처리해야 하는 과정이었습니다.

---

## 📊 개발 현황

Fallingo는 현재 베타 런칭 목표 시점(2025년 12월)을 살짝 지나, **핵심 기능 안정화 및 인프라 구축 단계**에 집중하고 있습니다.

| 영역 | 진행도 (예상) | 최근 작업 내용 | 다음 목표 |
| :--- | :--- | :--- | :--- |
| **백엔드 (FastAPI)** | 95% | DB 연결 안정화, 헬스 체크 로직 개선 | 결제 시스템 최종 연동 |
| **프론트엔드 (Flutter)** | 80% | 유료 기능 화면, UI/UX 디테일 수정 | 위치 기반 핵심 기능 통합 및 테스트 |
| **CI/CD 및 인프라** | 90% | Xcode Cloud 셋업, CSP 보안 정책 적용 | 테스트 자동화 스크립트 완성 |

기반 작업이 탄탄하게 잡히면서, 이제 다시 속도를 내어 사용자들이 직접 경험할 수 있는 핵심 기능 통합 작업에 집중할 수 있게 되었습니다.

다음 개발 일지에서는 Flutter에서 위치 기반 데이터를 어떻게 효율적으로 처리했는지에 대한 내용을 공유드릴 수 있도록 빠르게 진도를 빼보겠습니다. 읽어주셔서 감사합니다! 😊